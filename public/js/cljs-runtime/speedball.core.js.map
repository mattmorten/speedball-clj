{"version":3,"sources":["speedball/core.cljs"],"mappings":"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","names":["malli.instrument.instrument_BANG_","malli.core.function_schemas","speedball.core/Index","speedball.core/Position","speedball.core/Positions","speedball.core/Positionable","speedball.core/directions","speedball.core/direction->angle","p__26288","p__26289","vec__26290","cljs.core.nth","vec__26293","speedball.core/vectors-any-lt","a1","a2","b1","b2","var_args","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","speedball.core/add-vectors","seq26296","self__5712__auto__","cljs.core/seq","vecs","cljs.core/vec","cljs.core.apply","cljs.core/map","cljs.core/+","speedball.core/subtract-vectors","vec1","vec2","cljs.core/-","speedball.core/max-of-vector-elements","seq26297","vectors","cljs.core/mapv","cljs.core/max","speedball.core/min-of-vector-elements","seq26298","cljs.core/min","p__26299","p__26300","vec__26301","vec__26304","speedball.core/distance","x1","y1","x2","y2","Math/sqrt","Math/pow","speedball.core/map-2d-with-positions","two-d-like","cljs.core.map_indexed","row-idx","row","col-idx","texture-tile","cljs.core/concat","cljs.core.reduce","p__26307","vec__26308","accum","pos","texture","cljs.core.assoc","values__9973__auto__","cljs.core/List","result__9974__auto__","cljs.test/report","cljs.core/cons","t__10010__auto__","e26311","cljs.core/=","speedball.core/position","thing","speedball.core/Direction"],"sourcesContent":["(ns speedball.core\n  (:require [malli.core :as mc]\n            [malli.instrument :as mi]\n            [clojure.test :as t]))\n\n\n\n(mi/instrument!)\n(mc/function-schemas)\n\n\n(def Index [:int {:min 0}])\n(def Position [:tuple Index Index])\n(def Positions [:+ Position])\n\n\n(def Positionable [:map\n                   [:position Position]])\n\n(def directions\n  {:west [0 -1]\n   :east [0 1]\n   :south [1 0]\n   :north [-1 0]})\n\n(def direction->angle\n  {:south 0\n   :southeast 45\n   :east 90\n   :northeast 135\n   :north 180\n   :northwest 225\n   :west 270\n   :southwest 315})\n\n\n(defn vectors-any-lt\n  \"Any component is less than the other\"\n  [[a1 a2] [b1 b2]]\n  (or (< a1 a2) (< b1 b2)))\n\n\n\n(defn add-vectors [& vecs]\n  (vec (apply map + vecs)))\n\n(defn subtract-vectors [vec1 vec2]\n  (vec (apply map - [vec1 vec2])))\n\n(defn max-of-vector-elements [& vectors]\n  (apply mapv max vectors))\n\n(defn min-of-vector-elements [& vectors]\n  (apply mapv min vectors))\n\n(defn distance\n  \"Calculates the straight-line (Euclidean) distance between two 2D vectors.\"\n  [[x1 y1] [x2 y2]]\n  (Math/sqrt (+ (Math/pow (- x2 x1) 2)\n                (Math/pow (- y2 y1) 2))))\n\n\n(defn map-2d-with-positions\n  \"Produces a map from position to item in the 2d vector\"\n  [two-d-like]\n  (->> two-d-like\n         (map-indexed (fn [row-idx row]\n                        (->> row\n                             (map-indexed (fn [col-idx texture-tile]\n                                            [[row-idx col-idx] texture-tile])))))\n         (apply concat)\n         (reduce (fn [accum [pos texture]] (assoc accum pos texture)) {})))\n\n\n(t/is (= {[0 0] :a [0 1] :b\n          [1 0] :c [1 1] :d}\n         (map-2d-with-positions [[:a :b]\n                                 [:c :d]])))\n\n(defn position [thing] (:position thing))\n\n(def Direction [:enum :north :east :south :west :northeast :northwest :southeast :southwest])\n\n\n\n\n\n\n"]}